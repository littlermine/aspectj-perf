1. 在项目依赖中添加profiled-tool的依赖

    需要根据实际情况修改com.littlermine.profiled.ProfiledAspect.anyMethod()上面的包名前缀，默认是com.test包下

<dependency>
    <groupId>com.littlermine</groupId>
    <artifactId>profiled-tool</artifactId>
    <version>0.0.1-SNAPSHOT</version>
</dependency>

2. 项目的pom中增加下面的配置

    通用配置：
        <properties>
            <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
            <java.version>1.7</java.version>
        </properties>

    2.1. 如果项目使用了lombok
    <build>
        <sourceDirectory>${basedir}/src/main/java</sourceDirectory>
        <testSourceDirectory>${basedir}/src/test/java</testSourceDirectory>
        <resources>
            <resource>
                <directory>${basedir}/src/main/java</directory>
                <excludes>
                    <exclude>**/*.java</exclude>
                </excludes>
            </resource>
            <resource>
                <directory>src/main/resources</directory>
                <includes>
                    <include>**/*</include>
                </includes>
                <filtering>true</filtering>
            </resource>
        </resources>
        <plugins>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-compiler-plugin</artifactId>
                <version>3.1</version>
                <configuration>
                    <compilerVersion>${java.version}</compilerVersion>
                    <source>${java.version}</source>
                    <target>${java.version}</target>
                </configuration>
                <executions>
                    <execution>
                        <id>default-compile</id>
                        <phase>none</phase>
                    </execution>
                </executions>
            </plugin>
            <plugin>
                <groupId>org.projectlombok</groupId>
                <artifactId>lombok-maven-plugin</artifactId>
                <version>1.16.6.1</version>
                <executions>
                    <execution>
                        <id>delombok-sources</id>
                        <phase>generate-sources</phase>
                        <goals>
                            <goal>delombok</goal>
                        </goals>
                        <configuration>
                            <addOutputDirectory>false</addOutputDirectory>
                            <sourceDirectory>src/main/java</sourceDirectory>
                            <outputDirectory>${project.build.directory}/generated-sources/delombok</outputDirectory>
                        </configuration>
                    </execution>
                    <execution>
                        <id>delombok-test-sources</id>
                        <phase>generate-test-sources</phase>
                        <goals>
                            <goal>testDelombok</goal>
                        </goals>
                        <configuration>
                            <addOutputDirectory>false</addOutputDirectory>
                            <sourceDirectory>src/test/java</sourceDirectory>
                            <outputDirectory>${project.build.directory}/generated-test-sources/delombok</outputDirectory>
                        </configuration>
                    </execution>
                </executions>
            </plugin>
            <plugin>
                <groupId>org.codehaus.mojo</groupId>
                <artifactId>aspectj-maven-plugin</artifactId>
                <version>1.8</version>
                <configuration>
                    <forceAjcCompile>true</forceAjcCompile>
                    <showWeaveInfo>true</showWeaveInfo>
                    <source>${java.version}</source>
                    <target>${java.version}</target>
                    <complianceLevel>${java.version}</complianceLevel>
                    <encoding>${project.build.sourceEncoding}</encoding>
                    <Xlint>ignore</Xlint>
                    <verbose>true</verbose>
                    <aspectLibraries>
                        <aspectLibrary>
                            <groupId>com.littlermine</groupId>
                            <artifactId>profiled-tool</artifactId>
                        </aspectLibrary>
                    </aspectLibraries>
                </configuration>
                <executions>
                    <execution>
                        <id>compile</id>
                        <phase>compile</phase>
                        <goals>
                            <goal>compile</goal>
                        </goals>
                        <configuration>
                            <sources>
                                <source>
                                    <basedir>${project.build.directory}/generated-sources/delombok</basedir>
                                    <includes>
                                        <include>**/*.java</include>
                                    </includes>
                                </source>
                            </sources>
                        </configuration>
                    </execution>
                    <execution>
                        <id>test-compile</id>
                        <phase>test-compile</phase>
                        <goals>
                            <goal>test-compile</goal>
                        </goals>
                        <configuration>
                            <testSources>
                                <source>
                                    <basedir>${project.build.directory}/generated-sources/delombok</basedir>
                                    <includes>
                                        <include>**/*.java</include>
                                    </includes>
                                </source>
                                <source>
                                    <basedir>${project.build.directory}/generated-test-sources/delombok</basedir>
                                    <includes>
                                        <include>**/*.java</include>
                                    </includes>
                                </source>
                            </testSources>
                        </configuration>
                    </execution>
                </executions>
            </plugin>
        </plugins>
    </build>

    2.2. 如果项目没有使用lombok
    <build>
        <sourceDirectory>${basedir}/src/main/java</sourceDirectory>
        <testSourceDirectory>${basedir}/src/test/java</testSourceDirectory>
        <resources>
            <resource>
                <directory>${basedir}/src/main/java</directory>
                <excludes>
                    <exclude>**/*.java</exclude>
                </excludes>
            </resource>
            <resource>
                <directory>src/main/resources</directory>
                <includes>
                    <include>**/*</include>
                </includes>
                <filtering>true</filtering>
            </resource>
        </resources>
        <plugins>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-compiler-plugin</artifactId>
                <version>3.1</version>
                <configuration>
                    <compilerVersion>${java.version}</compilerVersion>
                    <source>${java.version}</source>
                    <target>${java.version}</target>
                </configuration>
                <executions>
                    <execution>
                        <id>default-compile</id>
                        <phase>none</phase>
                    </execution>
                </executions>
            </plugin>
            <plugin>
                <groupId>org.codehaus.mojo</groupId>
                <artifactId>aspectj-maven-plugin</artifactId>
                <version>1.8</version>
                <configuration>
                    <forceAjcCompile>true</forceAjcCompile>
                    <showWeaveInfo>true</showWeaveInfo>
                    <source>${java.version}</source>
                    <target>${java.version}</target>
                    <complianceLevel>${java.version}</complianceLevel>
                    <encoding>${project.build.sourceEncoding}</encoding>
                    <Xlint>ignore</Xlint>
                    <verbose>true</verbose>
                    <aspectLibraries>
                        <aspectLibrary>
                            <groupId>com.littlermine</groupId>
                            <artifactId>profiled-tool</artifactId>
                        </aspectLibrary>
                    </aspectLibraries>
                </configuration>
                <executions>
                    <execution>
                        <id>compile</id>
                        <phase>compile</phase>
                        <goals>
                            <goal>compile</goal>
                        </goals>
                        <configuration>
                            <sources>
                                <source>
                                    <basedir>${basedir}/src/main/java</basedir>
                                    <includes>
                                        <include>**/*.java</include>
                                    </includes>
                                </source>
                            </sources>
                        </configuration>
                    </execution>
                    <execution>
                        <id>test-compile</id>
                        <phase>test-compile</phase>
                        <goals>
                            <goal>test-compile</goal>
                        </goals>
                        <configuration>
                            <testSources>
                                <source>
                                    <basedir>${basedir}/src/main/java</basedir>
                                    <includes>
                                        <include>**/*.java</include>
                                    </includes>
                                </source>
                                <source>
                                    <basedir>${basedir}/src/test/java</basedir>
                                    <includes>
                                        <include>**/*.java</include>
                                    </includes>
                                </source>
                            </testSources>
                        </configuration>
                    </execution>
                </executions>
            </plugin>
        </plugins>
    </build>
    
    其中最重要的部分：
        <aspectLibraries>
            <aspectLibrary>
                 <groupId>com.littlermine</groupId>
                 <artifactId>profiled-tool</artifactId>
            </aspectLibrary>
        </aspectLibraries>

3. 在想要trace的方法上面添加注解com.littlermine.profiled.Profiled

4. 项目如果使用logback，请配置系统环境变量-Dapp.name={your server name} -Dlogs.path={the path of perf log}，且在logback配置文件中配置：
    <include resource="profiled-logback.xml"/>

    如果没有使用logback，可以考虑将com.littlermine.profiled.ProfiledLogUtils这个类产生的日志单独写入一个日志文件


注意：
    1. 使用该项目会修改原项目的字节码，打印异常显示的行号可能与源码中的行号不一致
    2. 使用的话会导致少量性能损耗，损耗比例未测试
    3. 还可以考虑使用java.lang.instrument实现同样的功能